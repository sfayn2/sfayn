!function(){function t(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function n(t,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function e(t,e,o){return e&&n(t.prototype,e),o&&n(t,o),t}(self.webpackChunktest_ng12=self.webpackChunktest_ng12||[]).push([[589],{7589:function(n,o,r){"use strict";r.r(o),r.d(o,{PaymentModule:function(){return Z}});var a=r(1116),i=r(7503),c=r(3464),p=r(5366),u=function(){var n=function(){function n(){t(this,n),this.totalPayment=0}return e(n,[{key:"ngOnInit",value:function(){}}]),n}();return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-payment-completion"]],inputs:{totalPayment:["amount","totalPayment"],orderId:["order","orderId"]},decls:8,vars:5,consts:[[1,"payment-completion"],[1,"payment-completion__total-payment","mat-display-1"],[1,"payment-completion__msg"],[1,"payment-completion__method"],[3,"amount","order"]],template:function(t,n){1&t&&(p.TgZ(0,"div",0),p.TgZ(1,"div",1),p._uU(2),p.ALo(3,"currency"),p.qZA(),p.TgZ(4,"div",2),p._uU(5," Please complete your payment in order process your order! "),p.qZA(),p.TgZ(6,"div",3),p._UZ(7,"app-payment-paypal",4),p.qZA(),p.qZA()),2&t&&(p.xp6(2),p.hij(" Total Payment: ",p.lcZ(3,3,n.totalPayment)," "),p.xp6(5),p.Q6J("amount",n.totalPayment)("order",n.orderId))},styles:[".payment-completion[_ngcontent-%COMP%]{background-color:#fff;padding:1rem 1.5rem;display:grid;border-bottom-color:#ccc;border-bottom-style:solid;grid-gap:1rem;gap:1rem;justify-items:center}.payment-completion__method[_ngcontent-%COMP%]{width:25%}"]}),n}(),s=r(7570),m=r(529),l=r(6694),d=["paypal"],y=function(){var n=function(){function n(e,o){t(this,n),this.paymentService=e,this.orderService=o,this.subscriptions=new s.w,this.totalPayment=0}return e(n,[{key:"ngOnInit",value:function(){var t=this;this.subscriptions=this.paymentService.paypalInitiate(m.N.paypalClientId).subscribe(function(){t.genPayPalButtons(t.orderService,t.totalPayment,t.orderId)})}},{key:"genPayPalButtons",value:function(t,n,e){paypal.Buttons({style:{color:"blue",shape:"pill",label:"pay",height:40,width:100},createOrder:function(t,e){return e.order.create({purchase_units:[{amount:{value:n}}],application_context:{shipping_preference:"NO_SHIPPING"}})},onApprove:function(n,o){return o.order.capture().then(function(n){"COMPLETED"==n.status&&(t.paid(e),console.log("Transaction completed by "+n.payer.name.given_name+"!"))})}}).render(this.paypalElement.nativeElement)}},{key:"ngOnDestroy",value:function(){this.subscriptions.unsubscribe(),this.paymentService.paypalRemove()}}]),n}();return n.\u0275fac=function(t){return new(t||n)(p.Y36(l.te),p.Y36(l.px))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-payment-paypal"]],viewQuery:function(t,n){var e;(1&t&&p.Gf(d,7),2&t)&&(p.iGM(e=p.CRH())&&(n.paypalElement=e.first))},inputs:{totalPayment:["amount","totalPayment"],orderId:["order","orderId"]},decls:2,vars:0,consts:[["paypal",""]],template:function(t,n){1&t&&p._UZ(0,"div",null,0)},styles:[""]}),n}(),f=function(){var n=function(){function n(){t(this,n)}return e(n,[{key:"ngOnInit",value:function(){}}]),n}();return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-payment-confirmation"]],decls:8,vars:0,consts:[[1,"payment-confirmation"],[1,"payment-confirmation__msg-confirmed","mat-display-1"],[1,"payment-confirmation__msg-email"],[1,"payment-confirmation__customer"],["href",""]],template:function(t,n){1&t&&(p.TgZ(0,"div",0),p.TgZ(1,"div",1),p._uU(2," Your order is confirmed! "),p.qZA(),p.TgZ(3,"div",2),p._uU(4," You'll receive a confirmation email with your order number shortly. "),p.qZA(),p.TgZ(5,"div",3),p.TgZ(6,"a",4),p._uU(7,"Continue Shopping"),p.qZA(),p.qZA(),p.qZA())},styles:[".payment-confirmation[_ngcontent-%COMP%]{background-color:#fff;padding:1rem 1.5rem;display:grid;border-bottom-color:#ccc;border-bottom-style:solid;justify-items:center;grid-gap:1rem;gap:1rem}"]}),n}();function g(t,n){if(1&t&&p._UZ(0,"app-payment-completion",3),2&t){var e=p.oxw();p.Q6J("amount",e.totalPayment)("order",e.orderId)}}function v(t,n){1&t&&p._UZ(0,"app-payment-confirmation")}var h,b=function(){var n=function(){function n(e,o){t(this,n),this.orderService=e,this.route=o,this.subscription=new s.w,this.totalPayment=0}return e(n,[{key:"ngOnInit",value:function(){var t=this;this.route.params.subscribe(function(n){t.orderId=n.id,t.subscription.add(t.getOrder(t.orderId))})}},{key:"getOrder",value:function(t){var n=this;this.orderService.getOrderQuery(t).valueChanges.subscribe(function(t){t.data.allShoporder.edges.forEach(function(t){console.log("getOrder",t.node),n.totalPayment=t.node.totalAmount,n.paymentStatus=t.node.status})})}}]),n}();return n.\u0275fac=function(t){return new(t||n)(p.Y36(l.px),p.Y36(c.gz))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-payment-main"]],decls:3,vars:2,consts:[[1,"payment-main"],[3,"amount","order",4,"ngIf"],[4,"ngIf"],[3,"amount","order"]],template:function(t,n){1&t&&(p.TgZ(0,"div",0),p.YNc(1,g,1,2,"app-payment-completion",1),p.YNc(2,v,1,0,"app-payment-confirmation",2),p.qZA()),2&t&&(p.xp6(1),p.Q6J("ngIf","Waiting For Payment"==n.paymentStatus),p.xp6(1),p.Q6J("ngIf","Paid"==n.paymentStatus))},styles:[".payment-main[_ngcontent-%COMP%]{display:grid;margin:1rem 2.5rem;grid-gap:.8rem;gap:.8rem}"]}),n}(),_=[{path:"payment/:id",component:b}],P=function(){var n=function n(){t(this,n)};return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[[c.Bz.forChild(_)],c.Bz]}),n}(),Z=((h=function n(){t(this,n)}).\u0275fac=function(t){return new(t||h)},h.\u0275mod=p.oAB({type:h}),h.\u0275inj=p.cJS({imports:[[a.ez,P,i.m]]}),h);p.B6R(b,[a.O5,u,f],[]),p.B6R(u,[y],[a.H9])}}])}();